// This line imports the Kaboom library.
import kaboom from "https://unpkg.com/kaboom@^3000.0.12/dist/kaboom.mjs";

// This creates the kaboom game, makes it full screen
kaboom({
  background: [135, 206, 235], // sets the color of the game
});

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
// Configurations and global variables here!

// These are the sprites for the game (ignore the errors)
loadSprite("bean", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/bean.png?v=1688618964513")
loadSprite("coin", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/coin.png?v=1688618966800")
loadSprite("spike", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/spike.png?v=1688618977354")
loadSprite("grass", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/grass.png?v=1688618971014")
loadSprite("ghosty", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/ghosty.png?v=1688618969880")
loadSprite("portal", "https://cdn.glitch.global/6e7edbfb-3679-4519-bb57-df3008b83592/portal.png?v=1688618976168")



// How fast the player moves
const SPEED = 480

// The maximum x and y the player can move to (the boundaries)
const MAXX = 3000
const MAXY = 3000


// Set the game's gravity.
setGravity(1250)

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

















////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
// Add your levels here!

const levels = [
  level1,
  level2,
]

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////













////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
// Modify how the game renders levels!

var levelID = 0;
var level;
var player;


function renderNewLevel(id) {
  if (level !== undefined) {
    level.destroy()
  }
  
  console.log(levels[id])
  
  level = addLevel(
  levels[id], {
	// The size of each grid tile
	tileWidth: 64,
	tileHeight: 64,
	// The on-screen position of the top left block
	pos: vec2(100, 400),
	// Define what each symbol means. Each symbol has a "game object" associated with it.
	tiles: {
		"@": () => [
			sprite("bean"), 
			area(), 
			body(),
			anchor("bot"), 
			"player", // Including a string here adds a tag to the object that you can refer to later.
		],
		"=": () => [
			sprite("grass"),
			area(),
			body({ isStatic: true }),
			anchor("bot"),
		],
		"$": () => [
			sprite("coin"),
			area(),
			anchor("bot"),
			"coin",
		],
		"^": () => [
			sprite("spike"),
			area(),
			anchor("bot"),
			"danger",
		],
    "#": () => [
      sprite("portal"),
      area(),
      anchor("bot"),
      "portal"
    ]
	},
})
  
  player = level.get("player")[0]
  initializeInteractions();
}

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////









renderNewLevel(levelID) // Starts up the first level

 






////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
// Event listeners!

function initializeInteractions() {


  
  
} // DO NOT DELETE THIS BRACKET

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
